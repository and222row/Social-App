(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9205:function(e,t,o){Promise.resolve().then(o.bind(o,6147))},6147:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return M}});var s=o(7437),n=o(1034),A=o.n(n);o(3054);var l=o(7623),a=o(1705),r=o(7450),i=o.n(r);let c=(0,o(6472).Z)({typography:{fontFamily:i().style.fontFamily}});var d=o(2265),u=o(1733),g=o(1326),h=o(9806),p=o(335),f=o(511),x=o(6983),m=o(9504),j=o(6014),E=o(6548),w=o(1853),Z=o(5870),y=o(788),C=o(7138),k=o(6648),B=o(1444),P={src:"/_next/static/media/fake-logo.a383db94.jpg",height:963,width:740,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAAIAAYDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABqhn/xAAXEAADAQAAAAAAAAAAAAAAAAABAgME/9oACAEBAAEFAptIaf/EABURAQEAAAAAAAAAAAAAAAAAAAAS/9oACAEDAQE/Aaf/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEv/aAAgBAgEBPwGX/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAECE4H/2gAIAQEABj8Cm7NP/8QAFxABAQEBAAAAAAAAAAAAAAAAASERAP/aAAgBAQABPyEpIXY23v/aAAwDAQACAAMAAAAQD//EABURAQEAAAAAAAAAAAAAAAAAAAEA/9oACAEDAQE/EFN//8QAFREBAQAAAAAAAAAAAAAAAAAAAQD/2gAIAQIBAT8QAX//xAAaEAACAgMAAAAAAAAAAAAAAAABEQAxIVFh/9oACAEBAAE/EKBOQ1LJ6FLuJ//Z",blurWidth:6,blurHeight:8};let Q=["Home"],I=["Profile"],z=()=>{localStorage.removeItem("loggedUser"),localStorage.removeItem("userId"),window.location.href="/login"};function S(){let[e,t]=d.useState(null),{userToken:o}=(0,B.v9)(e=>e.auth),[n,A]=d.useState(null),[l,a]=d.useState(null),r=()=>{A(null)},i=()=>{a(null)},c=localStorage.getItem("loggedUser");return(0,s.jsx)(u.Z,{position:"static",children:(0,s.jsx)(j.Z,{maxWidth:"xl",children:(0,s.jsxs)(h.Z,{disableGutters:!0,children:[(0,s.jsx)(y.Z,{fontSize:"large"}),(0,s.jsx)(f.Z,{variant:"h4",noWrap:!0,component:"span",sx:{mx:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"Social"}),(0,s.jsxs)(g.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,s.jsx)(p.Z,{size:"large","aria-label":"open drawer","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{A(e.currentTarget)},color:"inherit",children:(0,s.jsx)(m.Z,{})}),(0,s.jsx)(x.Z,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!n,onClose:r,sx:{display:{xs:"block",md:"none"}},children:c?Q.map(e=>(0,s.jsx)(Z.Z,{onClick:r,children:(0,s.jsx)(f.Z,{textAlign:"center",children:(0,s.jsx)(C.default,{href:"/".concat("Home"===e?"":e.toLowerCase()),children:e})})},e)):""})]}),(0,s.jsx)(f.Z,{variant:"h5",noWrap:!0,component:"a",href:"#",sx:{display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:500,letterSpacing:".2rem",color:"inherit",textDecoration:"none"},children:"SOCIAL"}),(0,s.jsx)(g.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:c?Q.map(e=>(0,s.jsx)(E.Z,{onClick:r,sx:{my:2,color:"white",display:"block"},children:(0,s.jsx)(C.default,{href:"/".concat("Home"===e?"":e.toLowerCase()),children:e})},e)):""}),(0,s.jsxs)(g.Z,{sx:{flexGrow:0,position:"relative",display:"flex",alignItems:"center"},children:[c?(0,s.jsx)(w.Z,{title:"Open settings",children:(0,s.jsx)(p.Z,{onClick:e=>{a(e.currentTarget)},sx:{p:0},children:(0,s.jsx)(g.Z,{sx:{p:1},children:(0,s.jsx)(k.default,{src:P,alt:"fake",width:50,height:50,style:{borderRadius:"10px"}})})})}):(0,s.jsxs)(g.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(C.default,{href:"/register",children:(0,s.jsx)(E.Z,{sx:{color:"white"},children:"Register"})}),(0,s.jsx)(C.default,{href:"/login",children:(0,s.jsx)(E.Z,{sx:{color:"white"},children:"Login"})})]}),(0,s.jsxs)(g.Z,{sx:{position:"relative"},children:[c?(0,s.jsx)(E.Z,{onClick:z,sx:{color:"white"},children:"Logout"}):"",(0,s.jsx)(x.Z,{sx:{mt:1,position:"absolute",right:0,zIndex:1300},id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!l,onClose:i,children:I.map(e=>(0,s.jsx)(Z.Z,{onClick:()=>{i(),"Logout"===e&&(window.location.href="/login")},children:(0,s.jsx)(f.Z,{textAlign:"center",children:(0,s.jsx)(C.default,{href:"/".concat(e.toLowerCase()),children:e})})},e))})]})]})]})})})}var v=o(6862),O=o(7954),b=o(8460);let D=(0,v.xC)({reducer:{auth:O.ZP,posts:b.ZP},middleware:e=>e({serializableCheck:{ignoredActions:["posts/getPosts/fulfilled","posts/getUserPosts/fulfilled","posts/getPost/fulfilled"],ignoredActionPaths:["meta.arg","payload.timestamp"],ignoredPaths:["items.dates"]}})});var L=o(4962),U=o(7449),F=o.n(U);function M(e){let{children:t}=e;return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsxs)(F(),{children:[(0,s.jsx)("title",{children:"Social APP"}),(0,s.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,s.jsx)("link",{rel:"icon",type:"image/svg+xml",href:"src/assets/images/fake-logo.jpg"})]}),(0,s.jsx)("body",{className:A().className,children:(0,s.jsx)(l.Z,{children:(0,s.jsx)(a.Z,{theme:c,children:(0,s.jsxs)(B.zt,{store:D,children:[(0,s.jsx)(S,{}),t,(0,s.jsx)(L.x7,{})]})})})})]})}},7954:function(e,t,o){"use strict";o.d(t,{iq:function(){return l},q0:function(){return A}});var s=o(6862),n=o(8472);let A=(0,s.hg)("auth/login",async function(e){return await n.Z.post("https://linked-posts.routemisr.com/users/signin",e).then(e=>(console.log(e),e.data)).catch(e=>(console.log(e),e))}),l=(0,s.hg)("auth/register",async function(e){return await n.Z.post("https://linked-posts.routemisr.com/users/signup",e).then(e=>(console.log(e),e.data)).catch(e=>(console.log(e),e))}),a=(0,s.oM)({name:"auth",initialState:{userToken:null,userData:null,isError:!1,isLoading:!1},reducers:{clearUserData:function(e){e.userData=null,e.userToken=null}},extraReducers:function(e){e.addCase(A.fulfilled,function(e,t){e.isLoading=!1,e.userToken=t.payload.token,localStorage.setItem("loggedUser",t.payload.token)}),e.addCase(l.fulfilled,function(e,t){e.isLoading=!1})}});t.ZP=a.reducer},8460:function(e,t,o){"use strict";o.d(t,{Bd:function(){return r},Ir:function(){return l},e7:function(){return A},q2:function(){return a},ww:function(){return i}});var s=o(6862),n=o(8472);let A=(0,s.hg)("posts/getPost",async function(e){return await n.Z.get("https://linked-posts.routemisr.com/posts/".concat(e),{headers:{token:localStorage.getItem("loggedUser")}})}),l=(0,s.hg)("posts/addComment",async function(e){return await n.Z.post("https://linked-posts.routemisr.com/comments",e,{headers:{token:localStorage.getItem("loggedUser")}})}),a=(0,s.hg)("posts/addPost",async function(e){let{body:t,image:o}=e;try{let e=new FormData;e.append("body",t),o&&e.append("image",o);let s=await n.Z.post("https://linked-posts.routemisr.com/posts",e,{headers:{"Content-Type":"multipart/form-data",token:localStorage.getItem("loggedUser")||""}});return console.log("actual response ====> ",s),s.data}catch(e){throw console.error(e),e}}),r=(0,s.hg)("posts/getPosts",async function(){return await n.Z.get("https://linked-posts.routemisr.com/posts?limit=40",{headers:{token:localStorage.getItem("loggedUser")}}).then(e=>e)}),i=(0,s.hg)("posts/getUserPosts",async function(e){return await n.Z.get("https://linked-posts.routemisr.com/users/".concat(e,"/posts?limit=30"),{headers:{token:localStorage.getItem("loggedUser")}})}),c=(0,s.oM)({name:"posts",initialState:{allPosts:null,specificPost:null,userPosts:null},reducers:{},extraReducers:function(e){e.addCase(r.fulfilled,function(e,t){console.log("action",t.payload.data.posts),e.allPosts=t.payload.data.posts}),e.addCase(A.fulfilled,function(e,t){e.specificPost=t.payload.data.post}),e.addCase(l.fulfilled,function(e,t){console.log(t)}),e.addCase(a.fulfilled,function(e,t){console.log("Post Added => ",t.payload)}),e.addCase(i.fulfilled,function(e,t){console.log("user posts ",t.payload.data.posts),e.userPosts=t.payload.data.posts})}});t.ZP=c.reducer},3054:function(){}},function(e){e.O(0,[215,235,472,866,242,641,971,23,744],function(){return e(e.s=9205)}),_N_E=e.O()}]);